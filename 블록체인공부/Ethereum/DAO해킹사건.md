### DAO 해킹 사건 개요 [[What is Ethereum]]

**사건 발생 시기:** 2016년 6월

**배경:** The DAO (Decentralized Autonomous Organization)는 이더리움 블록체인 위에 구축된 분산 자율 조직으로, 투자자들이 이더(ETH)를 예치하고, 이더리움 기반 프로젝트에 투자할 것을 제안하고 투표를 통해 결정하는 일종의 분산형 벤처 캐피탈 펀드였습니다. The DAO는 당시 역사상 가장 큰 크라우드 펀딩으로 약 1.5억 달러(당시 가치 기준, 약 1,270만 이더)에 달하는 자금을 모금했습니다. 이는 블록체인 기술의 잠재력을 보여주는 혁신적인 실험으로 평가받았습니다.

**해킹 과정:** 해커는 The DAO의 스마트 컨트랙트에 존재하는 **"재귀 호출 버그(Reentrancy Bug)"**를 악용했습니다. 이 버그는 컨트랙트가 자금을 반환하는 과정에서, 자금이 완전히 전송되기 전에 동일한 함수를 반복적으로 호출하여 실제 자산보다 더 많은 자산을 인출할 수 있도록 하는 취약점이었습니다.

구체적으로:

1. The DAO 스마트 컨트랙트에는 투자자가 자신의 DAO 토큰을 이더로 다시 환불받을 수 있는 `split` 함수가 있었습니다.
    
2. 해커는 `split` 함수를 호출하여 자신의 이더를 인출하려 했습니다.
    
3. `split` 함수는 이더를 보내기 전에 해커의 DAO 토큰 잔액을 업데이트하도록 설계되어 있었습니다.
    
4. 하지만 해커는 이더를 받는 계정에 악의적인 코드를 심어두어, 이더를 받는 순간 `split` 함수를 다시 호출(재귀 호출)하도록 했습니다.
    
5. 결과적으로, 해커의 DAO 토큰 잔액이 아직 업데이트되지 않은 상태에서 연쇄적으로 `split` 함수가 호출되었고, 해커는 초기 이더를 보낸 후에도 계속해서 더 많은 이더를 인출할 수 있었습니다.
    
6. 이러한 방식으로 해커는 The DAO에 예치된 이더 중 약 3분의 1에 해당하는 약 5천만 달러(당시 가치)를 탈취했습니다.
    

### 사건의 파급 효과 및 이후 전개

1. **이더리움 커뮤니티의 분열:**
    
    - **"코드 이즈 로(Code is Law)" vs. "정의 구현(Justice)"** 논쟁이 격화되었습니다.
        
    - 일부는 스마트 컨트랙트 코드가 곧 법이므로 해킹도 코드에 따라 일어난 정당한 행위이며, 블록체인의 불변성을 지켜야 한다고 주장했습니다.
        
    - 다른 일부는 해킹으로 인한 막대한 피해를 복구하고 정의를 구현해야 한다고 주장했습니다.
        
2. **이더리움 하드 포크(Hard Fork):**
    
    - 피해 복구를 위해 이더리움 커뮤니티는 해킹 이전 상태로 블록체인을 되돌리는 **하드 포크**를 단행하기로 결정했습니다.
        
    - 이는 체인의 역사를 인위적으로 변경하는 것이었기 때문에 엄청난 논란을 불러왔습니다.
        
    - 하드 포크를 지지하는 세력이 새로운 이더리움 체인(지금의 이더리움, ETH)을 만들었고, 하드 포크에 반대하는 세력은 기존 체인을 유지하여 이더리움 클래식(ETC)이 탄생했습니다. 이 사건으로 이더리움 블록체인은 두 개의 독립적인 체인으로 분리되었습니다.
        
3. **스마트 컨트랙트 개발의 경각심:**
    
    - The DAO 해킹 사건은 스마트 컨트랙트 개발 시 코드 감사(Code Audit)의 중요성과 잠재적인 취약점에 대한 심각한 경각심을 불러일으켰습니다.
        
    - 재귀 호출 버그 외에도 다양한 스마트 컨트랙트 취약점(정수 오버플로우/언더플로우, 시간 의존성 등)에 대한 연구와 보안 강화 노력이 활발해지는 계기가 되었습니다.
        
4. **블록체인 거버넌스의 숙제:**
    
    - 분산 자율 조직이 직면할 수 있는 거버넌스 문제, 특히 예상치 못한 상황에 대한 의사결정 과정의 어려움을 보여주었습니다.
        

The DAO 해킹 사건은 블록체인과 스마트 컨트랙트 기술이 아직 초기 단계이며, 코드의 완벽성과 거버넌스 모델에 대한 깊은 고민이 필요하다는 것을 전 세계에 알린 중요한 전환점이었습니다.
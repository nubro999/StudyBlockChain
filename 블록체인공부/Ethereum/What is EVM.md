

## EVM이란?

https://ethereum.org/ko/developers/docs/evm/

이더리움 가상 머신(EVM, Ethereum Virtual Machine)은 이더리움 네트워크에서 스마트 계약을 실행하는 컴퓨팅 환경으로, 탈중앙화된 글로벌 컴퓨터 역할을 수행합니다. 이더리움의 상태(state)는 사전 정의된 규칙에 따라 변하며, 다양한 형태의 스마트 계약 코드도 실행할 수 있습니다. EVM은 이러한 상태 변이 규칙을 정의하고, 블록마다 상태가 어떻게 변할지를 결정하여 트랜잭션과 스마트 계약이 일관되게 처리되도록 보장합니다. 이로 인해 이더리움은 다양한 분산 애플리케이션(dApps)을 운영하며, 네트워크 전체에서 일관된 상태를 유지할 수 있습니다.


2. EVM의 주요 특징
3) 튜링 완전성(Turing Completeness)

EVM은 조건문, 반복문 등 모든 논리 연산이 가능한 [[TuringComplete]]입니다.
이론적으로 어떤 프로그램이든 구현할 수 있습니다.

 [[SmartContract]] 실행

Solidity, Vyper 등으로 작성된 스마트 컨트랙트는 바이트코드로 컴파일되어 EVM에서 실행됩니다.
사용자는 [[01.BlockChain/블록체인공부/Ethereum/Transaction]]을 보내고, 이 트랜잭션이 EVM에서 실행되어 결과를 만듭니다.

## [[Gas]]

EVM에서 코드를 실행할 때 연산 비용(가스)이 필요합니다.
가스는 무한 루프, 과도한 자원 소모를 방지하는 역할을 하며, 이더(ETH)로 지불됩니다.


## 실행 구조

사용자/외부 계정이 트랜잭션을 보냄
트랜잭션이 네트워크에 전파됨
각 노드의 EVM이 트랜잭션을 받아서 바이트코드를 실행
상태(state)가 변경되고, 결과가 블록체인에 기록됨


## EVM의 역할

스마트 컨트랙트 배포: 배포된 컨트랙트의 바이트코드를 저장
스마트 컨트랙트 함수 실행: 함수 호출 시 입력값과 함께 코드를 실행
상태(state) 관리: 계정, 잔고, 저장소(스토리지) 등 블록체인 상태 변경


## EVM 바이트코드와 명령어

Solidity 등으로 작성한 코드는 EVM이 이해할 수 있는 바이트코드로 컴파일됨
EVM은 스택 기반(Stack-based) 가상 머신이며, PUSH, POP, ADD, JUMP 등 다양한 명령어(Opcode)를 사용함
예시:

PUSH1 0x60 (스택에 0x60 값을 푸시)
ADD (스택 위 두 값을 더함)



## EVM 호환성(EVM Compatible)

EVM을 채택한 다른 블록체인(Polygon, BNB Chain, Avalanche 등)은 이더리움과 스마트 컨트랙트 호환이 가능합니다.
즉, 이더리움용으로 만든 스마트 컨트랙트를 별도의 수정 없이 다른 EVM 호환 체인에 배포할 수 있습니다.


## EVM의 한계와 발전

속도와 확장성: 모든 노드가 같은 연산을 하므로 속도가 느릴 수 있음
업그레이드: EVM 자체는 하드포크 등으로 업그레이드 가능
최근에는 EVM을 더 빠르고 효율적으로 구현한 클라이언트, 또는 EVM을 대체하는 새로운 VM(예: eWASM)도 연구되고 있음


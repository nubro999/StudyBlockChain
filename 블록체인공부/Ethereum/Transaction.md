
- **from**: 트랜잭션을 서명할 발신자의 주소입니다. CA은 트랜잭션을 보낼 수 없으므로 EOA이어야 합니다.
- **to**: 수신 주소입니다. 수신 주소가 EOA인 경우, 트랜잭션은 value를 전송합니다. 수신 주소가 CA인 경우, 트랜잭션은 스마트 계약 코드를 실행하며, 필요에 따라 value를 전송할 수도 있습니다.
- **signature**: 발신자의 트랜잭션 승인 서명입니다. 이는 발신자의 개인 키를 사용하여 트랜잭션에 서명할 때 생성되며, 발신자가 이 트랜잭션을 승인했음을 확인합니다.
- **nonce**: 계정에서 보낸 트랜잭션 번호를 나타내는 순차적으로 증가하는 카운터로, 특정 계정의 트랜잭션 순서를 추적하고 중복 트랜잭션을 방지합니다. Account에서 등장했던 nonce와 같은 개념입니다.
- **value**: 발신자에서 수신자로 전송할 ETH의 양입니다 (1ETH는 1e+18wei로 표기됩니다).
- **input data**: 임의의 데이터를 포함할 수 있는 선택적 필드입니다.
- **gasLimit**: 트랜잭션이 소비할 수 있는 최대 가스 단위입니다. EVM은 각 계산 단계에 필요한 가스 단위를 지정합니다.
- **maxPriorityFeePerGas**: 검증자에게 팁으로 포함될 소비 가스의 최대 가격입니다.
- **maxFeePerGas**: 트랜잭션에 지불할 의사가 있는 단위 가스당 최대 수수료입니다 (baseFeePerGas와 maxPriorityFeePerGas를 포함합니다).

![[Pasted image 20250716222746.png]]
유효한 트랜잭션을 생성하려면 발신자는 ECDSA(타원 곡선 디지털 서명 알고리즘)를 사용하여 메시지에 디지털 서명을 해야 합니다. '트랜잭션에 서명하시오'라는 말은 'RLP(Recursive Length Prefix) 시리얼라이즈된 트랜잭션 데이터의 Keccak-256 해시에 서명하시오'라는 의미와 같습니다. 구체적으로, 트랜잭션 데이터는 먼저 RLP를 사용해 고유한 형식으로 변환되고, 이 변환된 데이터는 Keccak-256 해시 함수로 해싱되어 고정된 길이의 해시 값이 생성됩니다. 발신자는 이 해시 값에 대해 ECDSA를 사용해 디지털 서명을 합니다. 서명 과정은 트랜잭션이 발신자에 의해 승인되었음을 증명하고, 트랜잭션 데이터가 전송 중에 변조되지 않았음을 보장합니다. 결국 서명이 트랜잭션 데이터 전체가 아닌, 그 데이터의 해시 값에 적용된다는 것입니다.

서명이 완료된 후, 서명된 트랜잭션 객체는 원래의 트랜잭션 데이터와 함께 `v`, `r`, `s` 서명 값을 포함합니다. 이후, 이 서명된 트랜잭션 객체를 다시 RLP 시리얼라이즈하고, Keccak-256 해시 함수로 해싱하여 고유한 트랜잭션 ID가 생성됩니다. 이 트랜잭션 ID는 트랜잭션이 네트워크 내에서 고유하게 식별될 수 있도록 합니다.

트랜잭션 서명 순서

1. **트랜잭션 객체 생성**: 트랜잭션 데이터를 준비합니다. 이 데이터에는 발신자, 수신자, 전송할 금액, 가스 한도, 가스 가격, 데이터 필드 등이 포함됩니다. 아직 서명 전 상태입니다.
2. **RLP 시리얼라이제이션**: 트랜잭션 데이터를 **RLP(Recursive Length Prefix)** 형식으로 시리얼라이즈합니다. 이 과정은 트랜잭션을 고유한 바이너리 형식으로 변환하는 과정입니다.
3. **Keccak-256 해싱**: 시리얼라이즈된 트랜잭션 데이터를 **Keccak-256** 해시 함수에 넣어 해싱합니다. 이 해시 값은 서명에 사용됩니다.
4. **ECDSA 서명**: 생성된 해시 값을 가지고 ECDSA(타원 곡선 디지털 서명 알고리즘)를 사용해 서명합니다. 이 과정에서 **`v`, `r`, `s`** 값이 만들어집니다.
5. **서명된 트랜잭션 객체 생성**: 원래의 트랜잭션 데이터에 서명 값(`v`, `r`, `s`)을 추가하여 **서명된 트랜잭션 객체**를 만듭니다. 이 객체는 이제 네트워크에 전송될 준비가 되었습니다.
6. **다시 RLP 시리얼라이제이션**: 서명된 트랜잭션 객체 전체를 다시 **RLP 시리얼라이즈**합니다. 이 시점에서 트랜잭션 데이터와 서명 값(`v`, `r`, `s`)이 모두 포함된 최종 트랜잭션 객체가 생성됩니다.
7. **트랜잭션 ID 생성**: 최종 트랜잭션 객체를 **Keccak-256**으로 다시 해싱하여 **트랜잭션 ID**를 생성합니다. 이 ID는 네트워크 내에서 해당 트랜잭션을 고유하게 식별하는 데 사용됩니다.

Message VS Transaction
EOA는 트랜잭션을 생성하고 서명하여 메시지를 보낼 수 있습니다. 반면, CA는 메시지를 받을 때 코드가 실행되며, 이를 통해 내부 저장소를 읽고 쓰거나, 다른 메시지를 보내거나, 새로운 계약을 생성할 수 있습니다. 이더리움에서 "메시지(message)"와 "트랜잭션(transaction)"은 몇 가지 중요한 차이점이 있습니다. 메시지는 EOA뿐만 아니라 CA에 의해서도 생성될 수 있지만, 트랜잭션은 오직 EOA에서만 생성됩니다. 트랜잭션은 주로 이더를 전송하거나 스마트 계약을 호출하는 데 사용됩니다. 반면, 메시지는 EOA와 CA 간, 또는 CA 간의 함수 호출을 통해 주고받는 상호작용을 의미하며, CA가 다른 스마트 계약을 호출하거나 데이터를 전달할 때 생성됩니다. 이러한 메시지를 통해 스마트 계약 간에 데이터를 주고받으며, 계약 간 상호작용이나 추가 작업을 수행할 수 있습니다. 이 메시지 메커니즘은 CA가 EOA와 마찬가지로 메시지를 보내고, 다른 계약을 생성할 수 있는 권한과 능력을 가졌다는 것을 보여줍니다.